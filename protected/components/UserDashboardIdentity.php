<?php class UserDashboardIdentity extends CUserIdentity{	private $_id;	/**	 * Authenticates a user.	 * @return boolean whether authentication succeeds.	 */	public function authenticate()	{		$user=DashboardUserModel::model()->find('LOWER(username)=?',array(strtolower($this->username)));		if($user===null)			$this->errorCode=self::ERROR_USERNAME_INVALID;		else if(!$user->validatePassword($this->password))			$this->errorCode=self::ERROR_PASSWORD_INVALID;		else		{			$this->_id=$user->id;			$this->username=$user->username;			$this->setState('nama_lengkap', $user->nama);			$this->setState('email', $user->email);			$this->setState('access_menu', $user->access_menu);			$this->setState('status_user', "user_dashboard");			$this->setState('route_admin', "dashboard");			$this->errorCode=self::ERROR_NONE;			$names = InfrastrukturModel::model()->getAttributes(); 			foreach($names as $key => $value)			{				Yii::app()->session[$key."_dbi"] = TRUE;			}		}		return $this->errorCode==self::ERROR_NONE;	}	/**	 * @return integer the ID of the user record	 */	public function getId()	{		return $this->_id;	}}